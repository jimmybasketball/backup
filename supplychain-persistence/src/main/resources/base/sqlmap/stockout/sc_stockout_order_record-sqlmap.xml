<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sfebiz.supplychain.persistence.base.stockout.dao.StockoutOrderRecordDao">

<resultMap id="stockoutOrderRecordDOResult" type="com.sfebiz.supplychain.persistence.base.stockout.domain.StockoutOrderRecordDO">
    <result column="stockout_cmds_success_send_time" property="stockoutCmdsSuccessSendTime"/>
    <result column="overseas_warehouse_stockout_time" property="overseasWarehouseStockoutTime"/>
    <result column="overseas_warehouse_stockin_time" property="overseasWarehouseStockinTime"/>
    <result column="merchant_mail_no" property="merchantMailNo"/>
    <result column="wms_cmd_success_send_time" property="wmsCmdSuccessSendTime"/>
    <result column="wms_stockout_time" property="wmsStockoutTime"/>
    <result column="transfer_mail_no" property="transferMailNo"/>
    <result column="ccb_cmd_success_send_time" property="ccbCmdSuccessSendTime"/>
    <result column="tws_cmd_success_send_time" property="twsCmdSuccessSendTime"/>
    <result column="port_validate_pass_time" property="portValidatePassTime"/>
    <result column="tpl_intl_cmd_success_send_time" property="tplIntlCmdSuccessSendTime"/>
    <result column="tpl_intl_state" property="tplIntlState"/>
    <result column="pay_cmd_success_send_time" property="payCmdSuccessSendTime"/>
    <result column="stockout_order_id" property="stockoutOrderId"/>
    <result column="port_cmd_success_send_time" property="portCmdSuccessSendTime"/>
    <result column="tpl_intr_state" property="tplIntrState"/>
    <result column="tpl_intr_cmd_success_send_time" property="tplIntrCmdSuccessSendTime"/>
    <result column="wms_state" property="wmsState"/>
    <result column="ccb_state" property="ccbState"/>
    <result column="tws_state" property="twsState"/>
    <result column="remarks" property="remarks"/>
    <result column="biz_id" property="bizId"/>
    <result column="port_state" property="portState"/>
    <result column="ccb_mail_no" property="ccbMailNo"/>
    <result column="pay_state" property="payState"/>
    <result column="id" property="id"/>
    <result column="gmt_modified" property="gmtModified"/>
    <result column="gmt_create" property="gmtCreate"/>
</resultMap>

<sql id="stockoutOrderRecordDO_columns">
    stockout_cmds_success_send_time,
    overseas_warehouse_stockout_time,
    overseas_warehouse_stockin_time,
    merchant_mail_no,
    wms_cmd_success_send_time,
    wms_stockout_time,
    transfer_mail_no,
    ccb_cmd_success_send_time,
    tws_cmd_success_send_time,
    port_validate_pass_time,
    tpl_intl_cmd_success_send_time,
    tpl_intl_state,
    pay_cmd_success_send_time,
    stockout_order_id,
    port_cmd_success_send_time,
    tpl_intr_state,
    tpl_intr_cmd_success_send_time,
    wms_state,
    ccb_state,
    tws_state,
    remarks,
    biz_id,
    port_state,
    ccb_mail_no,
    pay_state,
    id,
    gmt_modified,
    gmt_create
</sql>

<sql id="stockoutOrderRecordDO_sqlForInsert">
    stockout_cmds_success_send_time,
    overseas_warehouse_stockout_time,
    overseas_warehouse_stockin_time,
    merchant_mail_no,
    wms_cmd_success_send_time,
    wms_stockout_time,
    transfer_mail_no,
    ccb_cmd_success_send_time,
    tws_cmd_success_send_time,
    port_validate_pass_time,
    tpl_intl_cmd_success_send_time,
    tpl_intl_state,
    pay_cmd_success_send_time,
    stockout_order_id,
    port_cmd_success_send_time,
    tpl_intr_state,
    tpl_intr_cmd_success_send_time,
    wms_state,
    ccb_state,
    tws_state,
    remarks,
    biz_id,
    port_state,
    ccb_mail_no,
    pay_state,
    id,
    gmt_modified,
    gmt_create
</sql>

<sql id="stockoutOrderRecordDO_columnsForInsert">
    #{stockoutCmdsSuccessSendTime},
    #{overseasWarehouseStockoutTime},
    #{overseasWarehouseStockinTime},
    #{merchantMailNo},
    #{wmsCmdSuccessSendTime},
    #{wmsStockoutTime},
    #{transferMailNo},
    #{ccbCmdSuccessSendTime},
    #{twsCmdSuccessSendTime},
    #{portValidatePassTime},
    #{tplIntlCmdSuccessSendTime},
    #{tplIntlState},
    #{payCmdSuccessSendTime},
    #{stockoutOrderId},
    #{portCmdSuccessSendTime},
    #{tplIntrState},
    #{tplIntrCmdSuccessSendTime},
    #{wmsState},
    #{ccbState},
    #{twsState},
    #{remarks},
    #{bizId},
    #{portState},
    #{ccbMailNo},
    #{payState},
    #{id},
    now(),
    now()
</sql>

<sql id="stockoutOrderRecordDO_setterForUpdate">
    <set>
        gmt_modified = now(),
        <if test="stockoutCmdsSuccessSendTime != null">
            stockout_cmds_success_send_time = #{stockoutCmdsSuccessSendTime},
        </if>
        <if test="overseasWarehouseStockoutTime != null">
            overseas_warehouse_stockout_time = #{overseasWarehouseStockoutTime},
        </if>
        <if test="overseasWarehouseStockinTime != null">
            overseas_warehouse_stockin_time = #{overseasWarehouseStockinTime},
        </if>
        <if test="merchantMailNo != null">
            merchant_mail_no = #{merchantMailNo},
        </if>
        <if test="wmsCmdSuccessSendTime != null">
            wms_cmd_success_send_time = #{wmsCmdSuccessSendTime},
        </if>
        <if test="wmsStockoutTime != null">
            wms_stockout_time = #{wmsStockoutTime},
        </if>
        <if test="transferMailNo != null">
            transfer_mail_no = #{transferMailNo},
        </if>
        <if test="ccbCmdSuccessSendTime != null">
            ccb_cmd_success_send_time = #{ccbCmdSuccessSendTime},
        </if>
        <if test="twsCmdSuccessSendTime != null">
            tws_cmd_success_send_time = #{twsCmdSuccessSendTime},
        </if>
        <if test="portValidatePassTime != null">
            port_validate_pass_time = #{portValidatePassTime},
        </if>
        <if test="tplIntlCmdSuccessSendTime != null">
            tpl_intl_cmd_success_send_time = #{tplIntlCmdSuccessSendTime},
        </if>
        <if test="tplIntlState != null">
            tpl_intl_state = #{tplIntlState},
        </if>
        <if test="payCmdSuccessSendTime != null">
            pay_cmd_success_send_time = #{payCmdSuccessSendTime},
        </if>
        <if test="stockoutOrderId != null">
            stockout_order_id = #{stockoutOrderId},
        </if>
        <if test="portCmdSuccessSendTime != null">
            port_cmd_success_send_time = #{portCmdSuccessSendTime},
        </if>
        <if test="tplIntrState != null">
            tpl_intr_state = #{tplIntrState},
        </if>
        <if test="tplIntrCmdSuccessSendTime != null">
            tpl_intr_cmd_success_send_time = #{tplIntrCmdSuccessSendTime},
        </if>
        <if test="wmsState != null">
            wms_state = #{wmsState},
        </if>
        <if test="ccbState != null">
            ccb_state = #{ccbState},
        </if>
        <if test="twsState != null">
            tws_state = #{twsState},
        </if>
        <if test="remarks != null">
            remarks = #{remarks},
        </if>
        <if test="bizId != null">
            biz_id = #{bizId},
        </if>
        <if test="portState != null">
            port_state = #{portState},
        </if>
        <if test="ccbMailNo != null">
            ccb_mail_no = #{ccbMailNo},
        </if>
        <if test="payState != null">
            pay_state = #{payState},
        </if>
    </set>
</sql>

<sql id="stockoutOrderRecordDO_selector">
    select
    <include refid="stockoutOrderRecordDO_columns"/>
    from sc_stockout_order_record
</sql>

<sql id="stockoutOrderRecordDO_query_segment">
    <trim prefix="WHERE" prefixOverrides="AND|OR">
        <if test="data.stockoutCmdsSuccessSendTime != null">
            AND stockout_cmds_success_send_time = #{data.stockoutCmdsSuccessSendTime}
        </if>
        <if test="data.overseasWarehouseStockoutTime != null">
            AND overseas_warehouse_stockout_time = #{data.overseasWarehouseStockoutTime}
        </if>
        <if test="data.overseasWarehouseStockinTime != null">
            AND overseas_warehouse_stockin_time = #{data.overseasWarehouseStockinTime}
        </if>
        <if test="data.merchantMailNo != null">
            AND merchant_mail_no = #{data.merchantMailNo}
        </if>
        <if test="data.wmsCmdSuccessSendTime != null">
            AND wms_cmd_success_send_time = #{data.wmsCmdSuccessSendTime}
        </if>
        <if test="data.wmsStockoutTime != null">
            AND wms_stockout_time = #{data.wmsStockoutTime}
        </if>
        <if test="data.transferMailNo != null">
            AND transfer_mail_no = #{data.transferMailNo}
        </if>
        <if test="data.ccbCmdSuccessSendTime != null">
            AND ccb_cmd_success_send_time = #{data.ccbCmdSuccessSendTime}
        </if>
        <if test="data.twsCmdSuccessSendTime != null">
            AND tws_cmd_success_send_time = #{data.twsCmdSuccessSendTime}
        </if>
        <if test="data.portValidatePassTime != null">
            AND port_validate_pass_time = #{data.portValidatePassTime}
        </if>
        <if test="data.tplIntlCmdSuccessSendTime != null">
            AND tpl_intl_cmd_success_send_time = #{data.tplIntlCmdSuccessSendTime}
        </if>
        <if test="data.tplIntlState != null">
            AND tpl_intl_state = #{data.tplIntlState}
        </if>
        <if test="data.payCmdSuccessSendTime != null">
            AND pay_cmd_success_send_time = #{data.payCmdSuccessSendTime}
        </if>
        <if test="data.stockoutOrderId != null">
            AND stockout_order_id = #{data.stockoutOrderId}
        </if>
        <if test="data.portCmdSuccessSendTime != null">
            AND port_cmd_success_send_time = #{data.portCmdSuccessSendTime}
        </if>
        <if test="data.tplIntrState != null">
            AND tpl_intr_state = #{data.tplIntrState}
        </if>
        <if test="data.tplIntrCmdSuccessSendTime != null">
            AND tpl_intr_cmd_success_send_time = #{data.tplIntrCmdSuccessSendTime}
        </if>
        <if test="data.wmsState != null">
            AND wms_state = #{data.wmsState}
        </if>
        <if test="data.ccbState != null">
            AND ccb_state = #{data.ccbState}
        </if>
        <if test="data.twsState != null">
            AND tws_state = #{data.twsState}
        </if>
        <if test="data.remarks != null">
            AND remarks = #{data.remarks}
        </if>
        <if test="data.bizId != null">
            AND biz_id = #{data.bizId}
        </if>
        <if test="data.portState != null">
            AND port_state = #{data.portState}
        </if>
        <if test="data.ccbMailNo != null">
            AND ccb_mail_no = #{data.ccbMailNo}
        </if>
        <if test="data.payState != null">
            AND pay_state = #{data.payState}
        </if>
        <if test="data.id != null">
            AND id = #{data.id}
        </if>
        <if test="data.gmtModified != null">
            AND gmt_modified = #{data.gmtModified}
        </if>
        <if test="data.gmtCreate != null">
            AND gmt_create = #{data.gmtCreate}
        </if>
        <if test="ins != null and ins != ''">
            AND
            <foreach collection="ins" item="item" open="(" separator="and" close=")">
                ${item.column} in
                <foreach collection="item.values" item="item" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </foreach>
        </if>
        <if test="notIns != null and notIns != ''">
            AND
            <foreach collection="notIns" item="item" open="(" separator="and" close=")">
                ${item.column} not in
                <foreach collection="item.values" item="item" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </foreach>
        </if>
        <if test="equals != null and equals != ''">
            AND
            <foreach collection="equals" item="item" open="(" separator="and" close=")">
                ${item.column} = #{item.value}
            </foreach>
        </if>
        <if test="notEquals != null and notEquals != ''">
            AND
            <foreach collection="notEquals" item="item" open="(" separator="and" close=")">
                ${item.column} = #{item.value}
            </foreach>
        </if>
        <if test="lts != null and lts != ''">
            AND
            <foreach collection="lts" item="item" open="(" separator="and" close=")">
                ${item.column} <![CDATA[ < ]]> #{item.value}
            </foreach>
        </if>
        <if test="gts != null and gts != ''">
            AND
            <foreach collection="gts" item="item" open="(" separator="and" close=")">
                ${item.column} <![CDATA[ > ]]> #{item.value}
            </foreach>
        </if>
        <if test="likes != null and likes != ''">
            AND
            <foreach collection="likes" item="item" open="(" separator="and" close=")">
                ${item.column} like concat('%', #{item.value}, '%')
            </foreach>
        </if>
        <if test="ltes != null and ltes != ''">
            AND
            <foreach collection="ltes" item="item" open="(" separator="and" close=")">
                ${item.column} <![CDATA[ <= ]]> #{item.value}
            </foreach>
        </if>
        <if test="gtes != null and gtes != ''">
            AND
            <foreach collection="gtes" item="item" open="(" separator="and" close=")">
                ${item.column} <![CDATA[ >= ]]> #{item.value}
            </foreach>
        </if>
        <if test="ranges != null and ranges != ''">
            AND
            <foreach collection="ranges" item="item" open="(" separator="and" close=")">
                ${item.column} <![CDATA[ >= ]]> #{item.from} and ${item.column} <![CDATA[ < ]]> #{item.to}
            </foreach>
        </if>
        AND is_delete = 0
    </trim>
</sql>


<insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="com.sfebiz.supplychain.persistence.base.stockout.domain.StockoutOrderRecordDO">
    insert into sc_stockout_order_record
    (
        <include refid="stockoutOrderRecordDO_sqlForInsert"/>
        ,is_delete
    )
    values
    (
        <include refid="stockoutOrderRecordDO_columnsForInsert"/>
        ,0
    )
</insert>

<update id="update" parameterType="com.sfebiz.supplychain.persistence.base.stockout.domain.StockoutOrderRecordDO">
    update sc_stockout_order_record
    <include refid="stockoutOrderRecordDO_setterForUpdate" />
    where id = #{id}
    and is_delete = 0
</update>


<update id="updateByQuery" parameterType="com.sfebiz.supplychain.persistence.base.stockout.domain.StockoutOrderRecordDO">
    update sc_stockout_order_record
    <set>
        gmt_modified = now(),
        <if test="update.stockoutCmdsSuccessSendTime != null">
            stockout_cmds_success_send_time = #{update.stockoutCmdsSuccessSendTime},
        </if>
        <if test="update.overseasWarehouseStockoutTime != null">
            overseas_warehouse_stockout_time = #{update.overseasWarehouseStockoutTime},
        </if>
        <if test="update.overseasWarehouseStockinTime != null">
            overseas_warehouse_stockin_time = #{update.overseasWarehouseStockinTime},
        </if>
        <if test="update.merchantMailNo != null">
            merchant_mail_no = #{update.merchantMailNo},
        </if>
        <if test="update.wmsCmdSuccessSendTime != null">
            wms_cmd_success_send_time = #{update.wmsCmdSuccessSendTime},
        </if>
        <if test="update.wmsStockoutTime != null">
            wms_stockout_time = #{update.wmsStockoutTime},
        </if>
        <if test="update.transferMailNo != null">
            transfer_mail_no = #{update.transferMailNo},
        </if>
        <if test="update.ccbCmdSuccessSendTime != null">
            ccb_cmd_success_send_time = #{update.ccbCmdSuccessSendTime},
        </if>
        <if test="update.twsCmdSuccessSendTime != null">
            tws_cmd_success_send_time = #{update.twsCmdSuccessSendTime},
        </if>
        <if test="update.portValidatePassTime != null">
            port_validate_pass_time = #{update.portValidatePassTime},
        </if>
        <if test="update.tplIntlCmdSuccessSendTime != null">
            tpl_intl_cmd_success_send_time = #{update.tplIntlCmdSuccessSendTime},
        </if>
        <if test="update.tplIntlState != null">
            tpl_intl_state = #{update.tplIntlState},
        </if>
        <if test="update.payCmdSuccessSendTime != null">
            pay_cmd_success_send_time = #{update.payCmdSuccessSendTime},
        </if>
        <if test="update.stockoutOrderId != null">
            stockout_order_id = #{update.stockoutOrderId},
        </if>
        <if test="update.portCmdSuccessSendTime != null">
            port_cmd_success_send_time = #{update.portCmdSuccessSendTime},
        </if>
        <if test="update.tplIntrState != null">
            tpl_intr_state = #{update.tplIntrState},
        </if>
        <if test="update.tplIntrCmdSuccessSendTime != null">
            tpl_intr_cmd_success_send_time = #{update.tplIntrCmdSuccessSendTime},
        </if>
        <if test="update.wmsState != null">
            wms_state = #{update.wmsState},
        </if>
        <if test="update.ccbState != null">
            ccb_state = #{update.ccbState},
        </if>
        <if test="update.twsState != null">
            tws_state = #{update.twsState},
        </if>
        <if test="update.remarks != null">
            remarks = #{update.remarks},
        </if>
        <if test="update.bizId != null">
            biz_id = #{update.bizId},
        </if>
        <if test="update.portState != null">
            port_state = #{update.portState},
        </if>
        <if test="update.ccbMailNo != null">
            ccb_mail_no = #{update.ccbMailNo},
        </if>
        <if test="update.payState != null">
            pay_state = #{update.payState},
        </if>
    </set>
    <include refid="stockoutOrderRecordDO_query_segment"/>
</update>


<insert id="insertOrUpdate" useGeneratedKeys="true" keyProperty="id" parameterType="com.sfebiz.supplychain.persistence.base.stockout.domain.StockoutOrderRecordDO">
    insert into sc_stockout_order_record
    (
        <include refid="stockoutOrderRecordDO_sqlForInsert"/>
        ,is_delete
    )
    values
    (
        <include refid="stockoutOrderRecordDO_columnsForInsert"/>
        ,0
    )
    on duplicate key update
    gmt_modified = now()
    ,is_delete = 0
    <if test="stockoutCmdsSuccessSendTime != null">
        ,stockout_cmds_success_send_time = #{stockoutCmdsSuccessSendTime}
    </if>
    <if test="overseasWarehouseStockoutTime != null">
        ,overseas_warehouse_stockout_time = #{overseasWarehouseStockoutTime}
    </if>
    <if test="overseasWarehouseStockinTime != null">
        ,overseas_warehouse_stockin_time = #{overseasWarehouseStockinTime}
    </if>
    <if test="merchantMailNo != null">
        ,merchant_mail_no = #{merchantMailNo}
    </if>
    <if test="wmsCmdSuccessSendTime != null">
        ,wms_cmd_success_send_time = #{wmsCmdSuccessSendTime}
    </if>
    <if test="wmsStockoutTime != null">
        ,wms_stockout_time = #{wmsStockoutTime}
    </if>
    <if test="transferMailNo != null">
        ,transfer_mail_no = #{transferMailNo}
    </if>
    <if test="ccbCmdSuccessSendTime != null">
        ,ccb_cmd_success_send_time = #{ccbCmdSuccessSendTime}
    </if>
    <if test="twsCmdSuccessSendTime != null">
        ,tws_cmd_success_send_time = #{twsCmdSuccessSendTime}
    </if>
    <if test="portValidatePassTime != null">
        ,port_validate_pass_time = #{portValidatePassTime}
    </if>
    <if test="tplIntlCmdSuccessSendTime != null">
        ,tpl_intl_cmd_success_send_time = #{tplIntlCmdSuccessSendTime}
    </if>
    <if test="tplIntlState != null">
        ,tpl_intl_state = #{tplIntlState}
    </if>
    <if test="payCmdSuccessSendTime != null">
        ,pay_cmd_success_send_time = #{payCmdSuccessSendTime}
    </if>
    <if test="stockoutOrderId != null">
        ,stockout_order_id = #{stockoutOrderId}
    </if>
    <if test="portCmdSuccessSendTime != null">
        ,port_cmd_success_send_time = #{portCmdSuccessSendTime}
    </if>
    <if test="tplIntrState != null">
        ,tpl_intr_state = #{tplIntrState}
    </if>
    <if test="tplIntrCmdSuccessSendTime != null">
        ,tpl_intr_cmd_success_send_time = #{tplIntrCmdSuccessSendTime}
    </if>
    <if test="wmsState != null">
        ,wms_state = #{wmsState}
    </if>
    <if test="ccbState != null">
        ,ccb_state = #{ccbState}
    </if>
    <if test="twsState != null">
        ,tws_state = #{twsState}
    </if>
    <if test="remarks != null">
        ,remarks = #{remarks}
    </if>
    <if test="bizId != null">
        ,biz_id = #{bizId}
    </if>
    <if test="portState != null">
        ,port_state = #{portState}
    </if>
    <if test="ccbMailNo != null">
        ,ccb_mail_no = #{ccbMailNo}
    </if>
    <if test="payState != null">
        ,pay_state = #{payState}
    </if>
</insert>

<!-- Delete -->
<update id="delete">
    update sc_stockout_order_record
    set is_delete = 1, gmt_modified = now()
    <include refid="stockoutOrderRecordDO_query_segment"/>
</update>
<update id="deleteById">
    update sc_stockout_order_record
    set is_delete = 1, gmt_modified = now()
    where id = #{id}
</update>





<!-- query class -->
<sql id="stockoutOrderRecordDO_groupBy">
    <if test="groupBys != null and groupBys != ''">
        group by
        <foreach collection="groupBys" item="item" open="" separator="," close="">
            #{item}
        </foreach>
    </if>
</sql>

<sql id="stockoutOrderRecordDO_orderby">
    <if test="orderBys != null and orderBys != ''">
        order by
        <foreach collection="orderBys" item="item" open="" separator="," close="">
            ${item.column} ${item.direction}
        </foreach>
    </if>
</sql>


<select id="query" resultMap="stockoutOrderRecordDOResult" parameterType="com.sfebiz.supplychain.persistence.base.stockout.domain.StockoutOrderRecordDO">
    <include refid="stockoutOrderRecordDO_selector"/>
    <include refid="stockoutOrderRecordDO_query_segment"/>
    <include refid="stockoutOrderRecordDO_groupBy"/>
    <include refid="stockoutOrderRecordDO_orderby"/>
</select>

<select id="query4Page" resultMap="stockoutOrderRecordDOResult" parameterType="com.sfebiz.supplychain.persistence.base.stockout.domain.StockoutOrderRecordDO">
    <include refid="stockoutOrderRecordDO_selector"/>
    <include refid="stockoutOrderRecordDO_query_segment"/>
    <include refid="stockoutOrderRecordDO_groupBy"/>
    <include refid="stockoutOrderRecordDO_orderby"/>
    limit ${startRowForMysql}, ${pageSize}
</select>


<select id="count" resultType="java.lang.Long">
    SELECT COUNT(1) FROM sc_stockout_order_record
    <include refid="stockoutOrderRecordDO_query_segment"/>
</select>

<select id="getById" resultMap="stockoutOrderRecordDOResult">
    <include refid="stockoutOrderRecordDO_selector"/>
    where id = #{id}
    and is_delete = 0
</select>

<select id="getByIdForUpdate" resultMap="stockoutOrderRecordDOResult">
    <include refid="stockoutOrderRecordDO_selector"/>
    where id = #{id}
    and is_delete = 0
    for update
</select>

    <!-- 修改出库单口岸下单状态 -->
    <update id="updatePortState" parameterType="com.sfebiz.supplychain.persistence.base.stockout.domain.StockoutOrderRecordDO">
        update sc_stockout_order_record
        set port_state = #{portState}
        <if test="portValidatePassTime != null">
            ,port_validate_pass_time = #{portValidatePassTime}
        </if>
        where stockout_order_id = #{stockoutOrderId}
    </update>
</mapper>
